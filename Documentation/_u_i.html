<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Urho3D: User interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Urho3D
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">User interface </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Urho3D implements a simple, hierarchical user interface system based on rectangular elements. The elements provided are:</p>
<ul>
<li>BorderImage: a texture image with an optional border</li>
<li>Button: a pushbutton</li>
<li>CheckBox: a button that can be toggled on/off</li>
<li>Cursor: a mouse cursor</li>
<li>DropDownList: shows a vertical list of items (optionally scrollable) as a popup</li>
<li>LineEdit: a single-line text editor</li>
<li>ListView: shows a scrollable vertical list of items</li>
<li>Menu: a button which can show a popup element</li>
<li>ScrollBar: a slider with back and forward buttons</li>
<li>ScrollView: a scrollable view of child elements</li>
<li>Slider: a horizontal or vertical slider bar</li>
<li>Sprite: a texture image which supports subpixel positioning, scaling and rotating.</li>
<li>Text: static text that can be multiline</li>
<li>ToolTip: a popup which automatically displays itself when the cursor hovers on its parent element.</li>
<li>UIElement: container for other elements, renders nothing by itself</li>
<li>View3D: a window that renders a 3D viewport</li>
<li>Window: a movable and resizable window</li>
</ul>
<p>The root UI element can be queried from the UI subsystem with the function GetRoot(). It is an empty canvas (UIElement) as large as the application window, into which other elements can be added.</p>
<p>Elements are added into each other similarly as scene nodes, using the AddChild() and RemoveChild() functions. Each UI element has also a user variables VariantMap for storing custom data, and the possibility to add tags for identification: see AddTag(), RemoveTag(), SetTags() and GetChildrenWithTag().</p>
<p>To allow the elements react to mouse input, either a mouse cursor element must be defined using SetCursor() or the operating system mouse cursor must be set visible from the Input subsystem.</p>
<h1><a class="anchor" id="UI_Textures"></a>
UI textures</h1>
<p>The BorderImage and elements deriving from it specify a texture and an absolute pixel rect within it to use for rendering; see SetTexture() and SetImageRect(). The texture is modulated with the element's color. To allow for more versatile scaling the element can be divided into 9 sub-quads or patches by specifying the width of each of its borders, see SetBorder(). Setting zero borders (the default) causes the element to be drawn as one quad.</p>
<p>The absolute pixel rects interact poorly with the Renderer's texture quality setting, which reduces texture sizes by skipping the topmost mipmaps. Generating mipmaps is also often unnecessary for UI textures, as they are usually displayed with 1:1 ratio on the screen. Therefore it's a good practice to use the following accompanying settings XML file for UI textures to disable quality reduction and mipmaps:</p>
<div class="fragment"><div class="line">&lt;texture&gt;</div>
<div class="line">    &lt;mipmap enable=<span class="stringliteral">&quot;false&quot;</span> /&gt;</div>
<div class="line">    &lt;quality low=<span class="stringliteral">&quot;0&quot;</span> /&gt;</div>
<div class="line">&lt;/texture&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="UI_Definition"></a>
UI layout and style definition files</h1>
<p>User interface elements derive from Serializable, so they can be serialized to/from XML using their attributes. There are two use cases for UI definition files: either defining just the UI element style (for example the image rects for a button's each state, or the font to use for a text) and leaving the actual position and dimensions to be filled in later, or fully defining an UI element layout. The default element style definitions, used for example by the editor and the debug console, are in the file bin/Data/UI/DefaultStyle.xml.</p>
<p>The function LoadLayout() in UI will take an XML file and instantiate the elements defined in it. To be valid XML, there should be one root-level UI element. An optional style XML file can be specified; the idea is to first read the element's style from that file, then fill in the rest from the actual layout XML file. This way the layout file can be relatively simple, as the majority of the data is already defined.</p>
<p>Note that a style can not be easily applied recursively to the loaded elements afterward. Therefore remember to specify the style file already when loading, or alternatively assign a default style file to the UI root element, which will then be picked up by all loaded layouts. This works because the UI subsystem searches the style file by going up the parental chain starting from target parent UI element. The search stops immediately when a style file is found or when it has reached the root element. Also note that Urho3D does not limit the number of style files being used at the same time in an application. You may have different style file set along the UI parental hierarchy, if your application needs that.</p>
<p>See the elements' C++ code for all supported attributes, and look at the editor's user interface layouts in the bin/Data/UI directory for examples. You can also use the Editor application to create UI layouts. The serialization format is similar to scene XML serialization, with three important differences:</p>
<p>1) The element type to instantiate, and the style to use for it can be set separately. For example the following element definition</p>
<div class="fragment"><div class="line">&lt;element type=<span class="stringliteral">&quot;Button&quot;</span> style=<span class="stringliteral">&quot;CloseButton&quot;</span> /&gt;</div>
</div><!-- fragment --><p>tells to instantiate a Button element, and that it should use the style "CloseButton" defined in the style XML file.</p>
<p>2) Internal child elements, for example the scroll bars of a ScrollView, need to be marked as such to avoid instantiating them as duplicates. This is done by adding the attribute internal="true" to the XML element, and is required in both layout and style XML files. Furthermore, the elements must be listed in the order they have been added as children of the parent element (if in doubt, see the element's C++ constructor code. Omitting elements in the middle is OK.) For example:</p>
<div class="fragment"><div class="line">&lt;element type=<span class="stringliteral">&quot;ScrollView&quot;</span> /&gt;</div>
<div class="line">    &lt;element type=<span class="stringliteral">&quot;ScrollBar&quot;</span> <span class="keyword">internal</span>=<span class="stringliteral">&quot;true&quot;</span> /&gt;</div>
<div class="line">        ...customize the horizontal scroll bar attributes here...</div>
<div class="line">    &lt;/element&gt;</div>
<div class="line">    &lt;element type=<span class="stringliteral">&quot;ScrollBar&quot;</span> <span class="keyword">internal</span>=<span class="stringliteral">&quot;true&quot;</span> /&gt;</div>
<div class="line">        ...customize the vertical scroll bar attributes here...</div>
<div class="line">    &lt;/element&gt;</div>
<div class="line">&lt;/element&gt;</div>
</div><!-- fragment --><p>3) The popup element shown by Menu and DropDownList is not an actual child element. In XML serialization, it is nevertheless stored as a child element, but is marked with the attribute popup="true".</p>
<h1><a class="anchor" id="UI_Programmatic"></a>
Defining UI layouts programmatically</h1>
<p>Instead of loading a UI element hierarchy from a definition file, it is just as valid (though cumbersome for larger hierarchies) to create the elements in code, which is demonstrated by several of the Urho3D samples.</p>
<p>In this mode of operation, styles are not automatically applied when an element is added or created to the hierarchy, even if a parent element (or the UI root) has a default style file assigned. This is because applying a style to an element means just setting a number of attributes and has potential to be "destructive" ie. overwrite the already set values. For each created element, you need to manually call either SetStyle() to specify a style name that should be applied, or SetStyleAuto() to use the element's typename as the style name, e.g. the style "Button" for a Button element. In order for this to work, each UI element should have a style file already effectively assigned either directly or via its parent element. A common mistake made by users is to construct child elements and attempt to style them inside a parent element's constructor but forgetting to explicitly assign a style file first in the constructor.</p>
<h1><a class="anchor" id="UI_Layouts"></a>
Child element layouting</h1>
<p>By default UI elements operate in a "free" layout mode, where child elements' positions can be specified relative to any of the parent element corners, but they are not automatically positioned or resized.</p>
<p>To create automatically adjusting child layouts, the layout mode can be switched to either "horizontal" or "vertical". Now the child elements will be positioned left to right or top to bottom, based on the order in which they were added. They will be preferably resized to fit the parent element, taking into account their minimum and maximum sizes, but failing to do that, the parent element will be resized.</p>
<p>Left, top, right &amp; bottom border widths and spacing between elements can also be specified for the layout. A grid layout is not directly supported, but it can be manually created with a horizontal layout inside a vertical layout, or vice versa.</p>
<p>Use the functions SetLayout() or SetLayoutMode() to control the layouting.</p>
<h1><a class="anchor" id="UI_Anchoring"></a>
Child element anchoring</h1>
<p>A separate mechanism from layouting that allows automatically adjusting UI hierarchies is to use anchoring. First enable anchoring in a child element with SetEnableAnchor(), after which the top-left and bottom-right corners in relation to the parent's size (range 0-1) can be set with SetMinAnchor() and SetMaxAnchor(). The corners can further be offset in pixels by calling SetMinOffset() and SetMaxOffset(). Finally note that instead of just setting horizontal / vertical alignment, the child element's pivot can also be expressed in a 0-1 range relative to its size by calling SetPivot().</p>
<h1><a class="anchor" id="UI_Fonts"></a>
Fonts</h1>
<p>Urho3D supports both FreeType (.ttf, .otf) and <a href="http://www.angelcode.com/products/bmfont">http://www.angelcode.com/products/bmfont</a>/ "bitmap" fonts.</p>
<p>For FreeType fonts, it is possible to adjust the positioning of the font glyphs. See SetAbsoluteGlyphOffset() to set a fixed pixel offset for all point sizes, or SetScaledGlyphOffset() to set a floating point offset that will be multiplied with the point size before applying. The offset information can be also stored in an accompanying XML file next to the font file, which is formatted in the following way: (it is legal to specify either or both of absolute and scaled offsets, and either or both of X &amp; Y coordinates)</p>
<div class="fragment"><div class="line">&lt;font&gt;</div>
<div class="line">    &lt;absoluteoffset x=<span class="stringliteral">&quot;xInt&quot;</span> y=<span class="stringliteral">&quot;yInt&quot;</span> /&gt;</div>
<div class="line">    &lt;scaledoffset x=<span class="stringliteral">&quot;xFloat&quot;</span> y=<span class="stringliteral">&quot;yFloat&quot;</span> /&gt;</div>
<div class="line">&lt;/font&gt;</div>
</div><!-- fragment --><p>The <a class="el" href="_u_i.html">UI</a> class has various global configuration options for font rendering. The default settings are similar to Windows-style rendering, with crisp characters but uneven spacing. For macOS-style rendering, with accurate spacing but slightly blurrier outlines, call UI::SetFontHintLevel(FONT_HINT_LEVEL_NONE). Use the Typography sample to explore these options and find the best configuration for your game.</p>
<p>By default, outline fonts will be hinted (aligned to pixel boundaries), using the font's embedded hints if possible. Call SetForceAutoHint() to use FreeType's standard auto-hinter rather than each font's embedded hints.</p>
<p>To adjust hinting, call SetFontHintLevel(). If the level is set to FONT_HINT_LEVEL_LIGHT, fonts will be aligned to the pixel grid vertically, but not horizontally. At FONT_HINT_LEVEL_NONE, hinting is completely disabled.</p>
<p>Hint levels LIGHT and NONE allow for subpixel glyph positioning, which greatly improves spacing, especially at small font sizes. By default, subpixel positioning is only used at sizes up to 12 points; at larger sizes, each glyph is pixel-aligned. Call SetFontSubpixelThreshold to change this threshold.</p>
<p>When textures aren't pixel-aligned, bilinear texture filtering makes them appear blurry. Therefore, subpixel font textures are oversampled (stretched horizontally) to reduce this blurriness, at the cost of extra memory usage. By default, subpixel fonts use 2x oversampling. Call SetFontOversampling to change this.</p>
<p>Subpixel positioning only operates horizontally. Text is always pixel-aligned vertically.</p>
<h1><a class="anchor" id="UI_Sprites"></a>
Sprites</h1>
<p>Sprites are a special kind of UI element that allow subpixel (float) positioning and scaling, as well as rotation, while the other elements use integer positioning for pixel-perfect display. Sprites can be used to implement rotating HUD elements such as minimaps or speedometer needles.</p>
<p>Due to the free transformability, sprites can not be reliably queried with GetElementAt(). Also, only other sprites should be parented to sprites, as the other elements do not support scaling and rotation.</p>
<h1><a class="anchor" id="UI_Cursor_Shapes"></a>
Cursor Shapes</h1>
<p>Urho3D supports custom Cursor Shapes defined from an Image.</p>
<p>The Shape can be an OS default from the CursorShape enum, which are automatically switched to and from by the <a class="el" href="_u_i.html">UI</a> subsystem, but can be manually switched to using Cursor::SetShape(CursorShape).</p>
<p>Alternatively they can be defined using a name in String format to identify it, which can only be manually switched to and from using Cursor::SetShape(const String&amp;).</p>
<p>There are a number of reserved names that are used for the OS defaults:</p><ul>
<li>Normal</li>
<li>IBeam</li>
<li>Cross</li>
<li>ResizeVertical</li>
<li>ResizeDiagonalTopRight</li>
<li>ResizeHorizontal</li>
<li>ResizeDiagonalTopLeft</li>
<li>ResizeAll</li>
<li>AcceptDrop</li>
<li>RejectDrop</li>
<li>Busy</li>
<li>BusyArrow</li>
</ul>
<p>Cursor Shapes can be define in a number of different ways:</p>
<p>XML: </p><div class="fragment"><div class="line">&lt;element type=<span class="stringliteral">&quot;Cursor&quot;</span>&gt;</div>
<div class="line">    &lt;attribute name=<span class="stringliteral">&quot;Shapes&quot;</span>&gt;</div>
<div class="line">        &lt;variant type=<span class="stringliteral">&quot;VariantVector&quot;</span> &gt;</div>
<div class="line">            &lt;variant type=<span class="stringliteral">&quot;String&quot;</span> value=<span class="stringliteral">&quot;Normal&quot;</span> /&gt;</div>
<div class="line">            &lt;variant type=<span class="stringliteral">&quot;ResourceRef&quot;</span> value=<span class="stringliteral">&quot;Image;Textures/UI.png&quot;</span> /&gt;</div>
<div class="line">            &lt;variant type=<span class="stringliteral">&quot;IntRect&quot;</span> value=<span class="stringliteral">&quot;0 0 12 24&quot;</span> /&gt;</div>
<div class="line">            &lt;variant type=<span class="stringliteral">&quot;IntVector2&quot;</span> value=<span class="stringliteral">&quot;0 0&quot;</span> /&gt;</div>
<div class="line">        &lt;/variant&gt;</div>
<div class="line">        &lt;variant type=<span class="stringliteral">&quot;VariantVector&quot;</span> &gt;</div>
<div class="line">            &lt;variant type=<span class="stringliteral">&quot;String&quot;</span> value=<span class="stringliteral">&quot;Custom&quot;</span> /&gt;</div>
<div class="line">            &lt;variant type=<span class="stringliteral">&quot;ResourceRef&quot;</span> value=<span class="stringliteral">&quot;Image;Textures/UI.png&quot;</span> /&gt;</div>
<div class="line">            &lt;variant type=<span class="stringliteral">&quot;IntRect&quot;</span> value=<span class="stringliteral">&quot;12 0 12 36&quot;</span> /&gt;</div>
<div class="line">            &lt;variant type=<span class="stringliteral">&quot;IntVector2&quot;</span> value=<span class="stringliteral">&quot;0 0&quot;</span> /&gt;</div>
<div class="line">        &lt;/variant&gt;</div>
<div class="line">    &lt;/atrribute&gt;</div>
<div class="line">&lt;/element&gt;</div>
</div><!-- fragment --><p>C++: </p><div class="fragment"><div class="line">UI* ui = GetSubsystem&lt;UI&gt;();</div>
<div class="line">ResourceCache* rc = GetSubsystem&lt;ResourceCache&gt;();</div>
<div class="line"> </div>
<div class="line">Cursor* cursor = <span class="keyword">new</span> Cursor(context_);</div>
<div class="line">Image* image = rc-&gt;GetResource&lt;Image&gt;(<span class="stringliteral">&quot;Textures/UI.png&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span> (image)</div>
<div class="line">{</div>
<div class="line">    cursor-&gt;DefineShape(CS_NORMAL, image, IntRect(0, 0, 12, 24), IntVector2(0, 0));</div>
<div class="line">    cursor-&gt;DefineShape(<span class="stringliteral">&quot;Custom&quot;</span>, image, IntRect(12, 0, 12, 36), IntVector2(0, 0));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">ui-&gt;SetCursor(cursor);</div>
</div><!-- fragment --><p>Angelcode: </p><div class="fragment"><div class="line">Cursor@ cursor = <span class="keyword">new</span> Cursor();</div>
<div class="line">Image@ image = cache.GetResource(<span class="stringliteral">&quot;Image&quot;</span>, <span class="stringliteral">&quot;Textures/UI.png&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span> (image !is <span class="keyword">null</span>)</div>
<div class="line">{</div>
<div class="line">    cursor.DefineShape(CS_NORMAL, image, IntRect(0, 0, 12, 24), IntVector2(0, 0));</div>
<div class="line">    cursor.DefineShape(<span class="stringliteral">&quot;Custom&quot;</span>, image, IntRect(12, 0, 12, 36), IntVector2(0, 0));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">ui.SetCursor(cursor);</div>
</div><!-- fragment --><h1><a class="anchor" id="UI_Scaling"></a>
Scaling</h1>
<p>By default the UI is pixel perfect: the root element is sized equal to the application window size.</p>
<p>The pixel scaling can be changed with the functions SetScale(), SetWidth() and SetHeight(). </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu May 13 2021 12:59:30 for Urho3D by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
<!-- Dviglo: Добавленный код -->
<script>
function GetRootPath()
{
    return "";
}
</script>
<script defer src='Addon.js'></script>
</body>
</html>
