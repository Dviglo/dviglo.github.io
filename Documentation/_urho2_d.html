<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Urho3D: Urho2D</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Urho3D
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Urho2D </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In order to make 2D games in Urho3D, the Urho2D sublibrary is provided. Urho2D includes 2D graphics and 2D physics.</p>
<p>A typical 2D game setup would consist of the following:</p><ul>
<li>Create an orthographic camera</li>
<li>Create some sprites</li>
<li>Use physics and constraints to interact with the scene</li>
</ul>
<h1><a class="anchor" id="Urho2D_Orthographic"></a>
Orthographic camera</h1>
<p>In order to use Urho2D we need to set camera to orthographic mode first; it can be done with following code:</p>
<p>C++: </p><div class="fragment"><div class="line">Node* cameraNode = scene_-&gt;CreateChild(<span class="stringliteral">&quot;Camera&quot;</span>); <span class="comment">// Create camera node</span></div>
<div class="line">Camera* camera = cameraNode-&gt;CreateComponent&lt;Camera&gt;(); <span class="comment">// Create camera</span></div>
<div class="line">camera-&gt;SetOrthographic(<span class="keyword">true</span>); <span class="comment">// Set camera orthographic</span></div>
<div class="line">camera-&gt;SetOrthoSize((<span class="keywordtype">float</span>)graphics-&gt;GetHeight() * PIXEL_SIZE); <span class="comment">// Set camera ortho size (the value of PIXEL_SIZE is 0.01)</span></div>
</div><!-- fragment --><p>AngelScript: </p><div class="fragment"><div class="line">Node@ cameraNode = scene_.CreateChild(<span class="stringliteral">&quot;Camera&quot;</span>); <span class="comment">// Create camera node</span></div>
<div class="line">Camera@ camera = cameraNode.CreateComponent(<span class="stringliteral">&quot;Camera&quot;</span>); <span class="comment">// Create camera</span></div>
<div class="line">camera.orthographic = <span class="keyword">true</span>; <span class="comment">// Set camera orthographic</span></div>
<div class="line">camera.orthoSize = graphics.height * PIXEL_SIZE; <span class="comment">// Set camera ortho size (the value of PIXEL_SIZE is 0.01)</span></div>
</div><!-- fragment --><p>Lua: </p><div class="fragment"><div class="line">cameraNode = scene_:CreateChild(<span class="stringliteral">&quot;Camera&quot;</span>) -- Create camera node</div>
<div class="line">local camera = cameraNode:CreateComponent(<span class="stringliteral">&quot;Camera&quot;</span>) -- Create camera</div>
<div class="line">camera.orthographic = <span class="keyword">true</span> -- Set camera orthographic</div>
<div class="line">camera.orthoSize = graphics.height * PIXEL_SIZE -- Set camera ortho size (the value of PIXEL_SIZE is 0.01)</div>
</div><!-- fragment --><p>To zoom in/out, use <a class="el" href="class_dviglo_1_1_camera.html#af25833d9e4cc129ea1624faec1264c25">SetZoom()</a>.</p>
<h1><a class="anchor" id="Urho2D_Sprites"></a>
Sprites</h1>
<p>Urho2D provides a handful of classes for loading/drawing the kind of sprite required by your game. You can chose from animated sprites, 2D particle emitters and static sprites.</p>
<h1><a class="anchor" id="Urho2D_Animated"></a>
Animated sprites</h1>
<p>Workflow for creating animated sprites in Urho2D relies on Spriter (c). Spriter is a crossplatform tool for creating 2D animations. It comes both as an almost fully featured free version and a more advanced 'pro' version. Free version is available at <a href="http://www.brashmonkey.com/spriter.htm">http://www.brashmonkey.com/spriter.htm</a>. To get started, scml files from bin/Data/Urho2D folder can be loaded in Spriter. Note that although currently Spriter doesn't support spritesheets/texture atlases, Urho2D does: you just have to use the same name for your scml file and your spritesheet's xml file (see <a class="el" href="_urho2_d.html#Urho2D_Static_Sprites">Static sprites</a> below for details on how to generate this file). Example 33_Urho2DSpriterAnimation is a good demonstration of this feature (scml file and xml spritesheet are both named 'imp' to instruct Urho2D to use the atlas instead of the individual files). You could remove every image files in the 'imp' folder and just keep 'imp_all.png' to test it out. However, keep your individual image files as they are still required if you want to later edit your scml project in Spriter.</p>
<p>A *.scml file is loaded using <a class="el" href="class_dviglo_1_1_animation_set2_d.html" title="Spriter animation set, it includes one or more animations, for more information please refer to http:...">AnimationSet2D</a> class (<a class="el" href="class_dviglo_1_1_resource.html">Resource</a>) and rendered using <a class="el" href="class_dviglo_1_1_animated_sprite2_d.html" title="Animated sprite component, it uses to play animation created by Spine (http://www....">AnimatedSprite2D</a> class (<a class="el" href="class_dviglo_1_1_drawable.html" title="Base class for visible components.">Drawable</a> component):</p>
<ul>
<li><a class="el" href="class_dviglo_1_1_animation_set2_d.html" title="Spriter animation set, it includes one or more animations, for more information please refer to http:...">AnimationSet2D</a>: a Spriter *.scml file including one or more animations. Each Spriter animation (Animation2D) contained in an <a class="el" href="class_dviglo_1_1_animation_set2_d.html" title="Spriter animation set, it includes one or more animations, for more information please refer to http:...">AnimationSet2D</a> can be accessed by its index and by its name (using <a class="el" href="class_dviglo_1_1_animation_set2_d.html#a935562e559ad5c3ce483cf7625ee3705">GetAnimation()</a>).</li>
<li><a class="el" href="class_dviglo_1_1_animated_sprite2_d.html" title="Animated sprite component, it uses to play animation created by Spine (http://www....">AnimatedSprite2D</a>: component used to display a Spriter animation (Animation2D) from an <a class="el" href="class_dviglo_1_1_animation_set2_d.html" title="Spriter animation set, it includes one or more animations, for more information please refer to http:...">AnimationSet2D</a>. Equivalent to a 3D <a class="el" href="class_dviglo_1_1_animated_model.html" title="Animated model component.">AnimatedModel</a>. Animation2D animations inside the <a class="el" href="class_dviglo_1_1_animation_set2_d.html" title="Spriter animation set, it includes one or more animations, for more information please refer to http:...">AnimationSet2D</a> are accessed by their name (String) using <a class="el" href="class_dviglo_1_1_animated_sprite2_d.html#a35c348041ad696de49cb0bd846b71848">SetAnimation()</a>. Playback animation speed can be controlled using <a class="el" href="class_dviglo_1_1_animated_sprite2_d.html#a6791fe518923024fa96febaa6b90838f">SetSpeed()</a>. Loop mode can be controlled using <a class="el" href="class_dviglo_1_1_animated_sprite2_d.html#a99512f0ed6f5ef709b851ee41f5781b0">SetLoopMode()</a>. You can use the default value set in Spriter (LM_DEFAULT) or make the animation repeat (LM_FORCE_LOOPED) or clamp (LM_FORCE_CLAMPED). One interesting feature is the ability to flip/mirror animations on both axes, using <a class="el" href="class_dviglo_1_1_static_sprite2_d.html#a0d49a68b0d97534f990aa75ee18f7cb8">SetFlip()</a>, <a class="el" href="class_dviglo_1_1_static_sprite2_d.html#a6219768f8904e45c0787d5b6970daeb2">SetFlipX()</a> or <a class="el" href="class_dviglo_1_1_static_sprite2_d.html#acbacc6a3a9a473de7bb4a5708ba25993">SetFlipY()</a>. Once flipped, the animation remains in that state until boolean state is restored to false. It is recommended to build your sprites centered in Spriter if you want to easily flip their animations and avoid using offsets for position and collision shapes.</li>
<li>Animation2D (<a class="el" href="class_dviglo_1_1_ref_counted.html" title="Base class for intrusively reference-counted objects. These are noncopyable and non-assignable.">RefCounted</a>): a Spriter animation from an <a class="el" href="class_dviglo_1_1_animation_set2_d.html" title="Spriter animation set, it includes one or more animations, for more information please refer to http:...">AnimationSet2D</a>. It allows readonly access to a given scml's animation name (GetName()), length (GetLength()) and loop state (IsLooped()).</li>
</ul>
<p>For a demonstration, check examples 33_Urho2DSpriterAnimation and 24_Urho2DSprite.</p>
<p>Tip for naming your files:</p><ul>
<li>if an xml file has the same name as an image file in the same repository, it is assumed that it is a texture parameter file</li>
<li>if an xml file has the same name as a Spriter scml file in the same repository, it is assumed that it is a spritesheet file So to prevent conflicts, scml and image files shouldn't have the exact same name.</li>
</ul>
<h1><a class="anchor" id="Urho2D_Particle"></a>
Particle emitters</h1>
<p>A 2D particle emitter is built from a *.pex file (a format used by many 2D engines). A *.pex file is loaded using <a class="el" href="class_dviglo_1_1_particle_effect2_d.html" title="2D particle effect resource.">ParticleEffect2D</a> class (<a class="el" href="class_dviglo_1_1_resource.html">Resource</a>) and rendered using <a class="el" href="class_dviglo_1_1_particle_emitter2_d.html" title="2D particle emitter component.">ParticleEmitter2D</a> class (<a class="el" href="class_dviglo_1_1_drawable.html" title="Base class for visible components.">Drawable</a> component):</p>
<ul>
<li><a class="el" href="class_dviglo_1_1_particle_effect2_d.html" title="2D particle effect resource.">ParticleEffect2D</a>: a *.pex file defining the behavior and texture of a 2D particle (<a class="el" href="class_dviglo_1_1_particle_emitter2_d.html" title="2D particle emitter component.">ParticleEmitter2D</a>). For an example, see bin/Data/Urho2D/greenspiral.pex</li>
<li><a class="el" href="class_dviglo_1_1_particle_emitter2_d.html" title="2D particle emitter component.">ParticleEmitter2D</a>: used to display a <a class="el" href="class_dviglo_1_1_particle_effect2_d.html" title="2D particle effect resource.">ParticleEffect2D</a>. Equivalent to a 3D <a class="el" href="class_dviglo_1_1_particle_emitter.html" title="Particle emitter component.">ParticleEmitter</a>.</li>
</ul>
<p>For a demonstration, check example 25_Urho2DParticle.</p>
<p>'ParticleEditor2D' tool (<a href="https://github.com/aster2013/ParticleEditor2D">https://github.com/aster2013/ParticleEditor2D</a>) can be used to easily create pex files. And to get you started, many elaborate pex samples under friendly licenses are available on the web, mostly on Github (check ParticlePanda, Citrus Engine, Particle Designer, Flambe, Starling, CBL...)</p>
<h1><a class="anchor" id="Urho2D_Static_Sprites"></a>
Static sprites</h1>
<p>Static sprites are built from single image files or from spritesheets/texture atlases. Single image files are loaded using <a class="el" href="class_dviglo_1_1_sprite2_d.html" title="Sprite.">Sprite2D</a> class (<a class="el" href="class_dviglo_1_1_resource.html">Resource</a>) and spritesheets/texture atlases are loaded using <a class="el" href="class_dviglo_1_1_sprite_sheet2_d.html" title="Sprite sheet.">SpriteSheet2D</a> class (<a class="el" href="class_dviglo_1_1_resource.html">Resource</a>). Both are rendered using <a class="el" href="class_dviglo_1_1_static_sprite2_d.html" title="Static sprite component.">StaticSprite2D</a> class (<a class="el" href="class_dviglo_1_1_drawable.html" title="Base class for visible components.">Drawable</a> component):</p><ul>
<li><a class="el" href="class_dviglo_1_1_sprite2_d.html" title="Sprite.">Sprite2D</a>: an image defined with texture, texture rectangle and hot spot.</li>
<li><a class="el" href="class_dviglo_1_1_sprite_sheet2_d.html" title="Sprite sheet.">SpriteSheet2D</a>: a texture atlas image (that packs multiple <a class="el" href="class_dviglo_1_1_sprite2_d.html" title="Sprite.">Sprite2D</a> images).</li>
<li><a class="el" href="class_dviglo_1_1_static_sprite2_d.html" title="Static sprite component.">StaticSprite2D</a>: used to display a <a class="el" href="class_dviglo_1_1_sprite2_d.html" title="Sprite.">Sprite2D</a>. Equivalent to a 3D <a class="el" href="class_dviglo_1_1_static_model.html" title="Static model component.">StaticModel</a>. Spritesheets can be created using tools like ShoeBox (<a href="http://renderhjs.net/shoebox/">http://renderhjs.net/shoebox/</a>), darkFunction Editor (<a href="http://darkfunction.com/editor/">http://darkfunction.com/editor/</a>), SpriteHelper (<a href="http://www.gamedevhelper.com/spriteHelper2Info.php">http://www.gamedevhelper.com/spriteHelper2Info.php</a>), TexturePacker (<a href="https://www.codeandweb.com/texturepacker">https://www.codeandweb.com/texturepacker</a>), ... These tools will generate an image file and a xml file mapping coordinates and size for each individual image. Note that Urho2D uses same xml file format as Sparrow/Starling engines.</li>
</ul>
<p>You can assign a material to an image by creating a xml parameter file named as the image and located in the same folder. For example, to make the box sprite (bin/Data/Urho2D/Box.png) nearest filtered, create a file Box.xml next to it, with the following content:</p>
<div class="fragment"><div class="line">&lt;texture&gt;</div>
<div class="line">    &lt;filter mode=<span class="stringliteral">&quot;nearest&quot;</span> /&gt;</div>
<div class="line">&lt;/texture&gt;</div>
</div><!-- fragment --><p>The full list of texture parameters is documented <a class="el" href="_materials.html">here</a>.</p>
<p>To control sprite opacity, use <a class="el" href="class_dviglo_1_1_static_sprite2_d.html#a3c320f5f7c9f06e4b850ecb23b8b50e5">SetAlpha()</a> (you can also tweak the color alpha using <a class="el" href="class_dviglo_1_1_static_sprite2_d.html#ac56311c2bc087d6b21a8a9437025487b">SetColor()</a>.)</p>
<p>By default, sprite hotspot is centered, but you can choose another hotspot if need be: use <a class="el" href="class_dviglo_1_1_static_sprite2_d.html#a75194b9d3868fdca34ee33ead3132a3b">SetUseHotSpot()</a> and <a class="el" href="class_dviglo_1_1_static_sprite2_d.html#a56dc69ae0be7b0f4ba03bcd42ce107e0">SetHotSpot()</a>.</p>
<h1><a class="anchor" id="Urho2D_Background_and_Layers"></a>
Background and layers</h1>
<p>To set the background color for the scene, use <a class="el" href="class_dviglo_1_1_renderer.html#a7a151dfcc5a8d7350de9cf9b1701cc1f">GetDefaultZone()</a> and <a class="el" href="class_dviglo_1_1_zone.html#a444f6f6a8c2c1c0e2b542375146457fd">SetFogColor()</a>.</p>
<p>You can use different layers in order to simulate perspective. In this case you can use <a class="el" href="class_dviglo_1_1_drawable2_d.html#a1a7f578f9aba0f4c0b713b37282cfd29">SetLayer()</a> and <a class="el" href="class_dviglo_1_1_drawable2_d.html#aa34a9135a960cd265d5b903904ebcea0">SetOrderInLayer()</a> to organise your sprites and arrange their display order.</p>
<p>Finally, note that you can easily mix both 2D and 3D resources. 3D assets' position need to be slightly offset on the Z axis (z=1 is enough), <a class="el" href="class_dviglo_1_1_camera.html" title="Camera component.">Camera</a>'s position needs to be slightly offset (on the Z axis) from 3D assets' max girth and a <a class="el" href="class_dviglo_1_1_light.html" title="Light component.">Light</a> is required.</p>
<h1><a class="anchor" id="Urho2D_Physics"></a>
Physics</h1>
<p>Urho2D implements rigid body physics simulation using the Box2D library. You can refer to Box2D manual at <a href="http://box2d.org/manual.pdf">http://box2d.org/manual.pdf</a> for full reference. <a class="el" href="class_dviglo_1_1_physics_world2_d.html" title="2D physics simulation world component. Should be added only to the root scene node.">PhysicsWorld2D</a> class implements 2D physics simulation in Urho3D and is mandatory for 2D physics components such as <a class="el" href="class_dviglo_1_1_rigid_body2_d.html" title="2D rigid body component.">RigidBody2D</a>, <a class="el" href="class_dviglo_1_1_collision_shape2_d.html" title="2D collision shape component.">CollisionShape2D</a> or <a class="el" href="class_dviglo_1_1_constraint2_d.html" title="2D physics constraint component.">Constraint2D</a>.</p>
<h1><a class="anchor" id="Urho2D_Rigidbodies_Components"></a>
Rigid bodies components</h1>
<p><a class="el" href="class_dviglo_1_1_rigid_body2_d.html" title="2D rigid body component.">RigidBody2D</a> is the base class for 2D physics object instance.</p>
<p>Available rigid bodies (BodyType2D) are:</p><ul>
<li>BT_STATIC: a static body does not move under simulation and behaves as if it has infinite mass. Internally, Box2D stores zero for the mass and the inverse mass. Static bodies can be moved manually by the user. A static body has zero velocity. Static bodies do not collide with other static or kinematic bodies.</li>
<li>BT_DYNAMIC: a dynamic body is fully simulated. It can be moved manually by the user, but normally it moves according to forces. A dynamic body can collide with all body types. A dynamic body always has finite, non-zero mass. If you try to set the mass of a dynamic body to zero, it will automatically acquire a mass of one kilogram.</li>
<li>BT_KINEMATIC: a kinematic body moves under simulation according to its velocity. Kinematic bodies do not respond to forces. They can be moved manually by the user, but normally a kinematic body is moved by setting its velocity. A kinematic body behaves as if it has infinite mass, however, Box2D stores zero for the mass and the inverse mass. Kinematic bodies do not collide with other static or kinematic bodies.</li>
</ul>
<p>You should establish the body type at creation, using <a class="el" href="class_dviglo_1_1_rigid_body2_d.html#a430f614f4609a7624ee67c2b4a6150c5">SetBodyType()</a>, because changing the body type later is expensive.</p>
<p>Rigid bodies can be moved/rotated by applying forces and impulses:</p><ul>
<li>linear force (progressive/gradual):<ul>
<li><a class="el" href="class_dviglo_1_1_rigid_body2_d.html#a02bccef5acf232efeb86b2df6c100d54">ApplyForce()</a></li>
<li><a class="el" href="class_dviglo_1_1_rigid_body2_d.html#ab45d4f0dc86c9bc77d24ca910e06466e">ApplyForceToCenter()</a> (same as ApplyForce, the world point where to apply the force is set to center of mass, which prevents the body from rotating/spinning)</li>
</ul>
</li>
<li>linear or angular impulse (brutal/immediate):<ul>
<li><a class="el" href="class_dviglo_1_1_rigid_body2_d.html#a93b7f827828a10b5a008ac2da2b0036c">ApplyLinearImpulse()</a></li>
<li><a class="el" href="class_dviglo_1_1_rigid_body2_d.html#aa0bffa72b81e2d81d452b7e44e76132e">ApplyAngularImpulse()</a></li>
</ul>
</li>
<li>torque (angular force):<ul>
<li><a class="el" href="class_dviglo_1_1_rigid_body2_d.html#ad0ef3e49ce4a90a2ca3d1295a27afc19">ApplyTorque()</a></li>
</ul>
</li>
</ul>
<p>ApplyForce() and ApplyLinearImpulse() take two parameters: the direction of the force and where to apply it. Note that in order to improve performance, you can request the body to sleep by setting 'wake' parameter to false.</p>
<p>You can also directly set the linear or angular velocity of the body using <a class="el" href="class_dviglo_1_1_rigid_body2_d.html#a508685b234b6aabfff6d14c1c777ba62">SetLinearVelocity()</a> or <a class="el" href="class_dviglo_1_1_rigid_body2_d.html#a9fd83cc2e7502d5a9fdf030cef3800e5">SetAngularVelocity()</a>. And you can get current velocity using <a class="el" href="class_dviglo_1_1_rigid_body2_d.html#a677da73dad51054adb634fdf00e8bd78">GetLinearVelocity()</a> or <a class="el" href="class_dviglo_1_1_rigid_body2_d.html#aee24d4cb42c188f9ef4c1ef6b7b10811">GetAngularVelocity()</a>.</p>
<p>To 'manually' move or rotate a body, simply translate or rotate the node to which it belongs to.</p>
<h1><a class="anchor" id="Urho2D_Collision_Shapes_Components"></a>
Collision shapes components</h1>
<p>Check Box2D manual - Chapter 4 Collision Module and Chapter 7 Fixtures for full reference.</p>
<h2><a class="anchor" id="Urho2D_Collision_Shapes_Shapes"></a>
Shapes</h2>
<ul>
<li><a class="el" href="class_dviglo_1_1_collision_box2_d.html" title="2D box collision component.">CollisionBox2D</a>: defines 2D physics collision box. Box shapes have an optional position offset (<a class="el" href="class_dviglo_1_1_collision_box2_d.html#a248df3985d92b480ef48f4cfe9a731f4">SetCenter()</a>), width and height size (<a class="el" href="class_dviglo_1_1_collision_box2_d.html#a650e744b5df9e0167d42cdeb0c0eb078">SetSize()</a>) and a rotation angle expressed in degrees (<a class="el" href="class_dviglo_1_1_collision_box2_d.html#ac02c86004d7214a933c29a6f52ca70de">SetAngle()</a>.). Boxes are solid, so if you need a hollow box shape then create one from a <a class="el" href="class_dviglo_1_1_collision_chain2_d.html" title="2D chain collision component.">CollisionChain2D</a> shape.</li>
<li>Circle shapes &lt;=&gt; <a class="el" href="class_dviglo_1_1_collision_circle2_d.html" title="2D circle collision component.">CollisionCircle2D</a>: defines 2D physics collision circle. Circle shapes have an optional position offset (<a class="el" href="class_dviglo_1_1_collision_circle2_d.html#ac65e9beb8857bb600629ceca8fd7a7f8">SetCenter()</a>) and a radius (<a class="el" href="class_dviglo_1_1_collision_circle2_d.html#a84f33a22b7bb1da4fca32c7fb6e0b1e4">SetRadius()</a>). Circles are solid, you cannot make a hollow circle using the circle shape.</li>
<li>Polygon shapes &lt;=&gt; <a class="el" href="class_dviglo_1_1_collision_polygon2_d.html" title="2D polygon collision component.">CollisionPolygon2D</a>: defines 2D physics collision polygon. Polygon shapes are solid convex polygons. A polygon is convex when all line segments connecting two points in the interior do not cross any edge of the polygon. A polygon must have 3 or more vertices (<a class="el" href="class_dviglo_1_1_collision_polygon2_d.html#af9c034d7f5bea48091d9eb4328fe9292">SetVertices()</a>). Polygons vertices winding doesn't matter.</li>
<li>Edge shapes &lt;=&gt; <a class="el" href="class_dviglo_1_1_collision_edge2_d.html" title="2D edge collision component.">CollisionEdge2D</a>: defines 2D physics collision edge. Edge shapes are line segments defined by 2 vertices (<a class="el" href="class_dviglo_1_1_collision_edge2_d.html#a603fcae23eb026b9b3bc98897464693c">SetVertex1()</a> and <a class="el" href="class_dviglo_1_1_collision_edge2_d.html#aaa4f22dcfbcae421735500ec01f7dc8b">SetVertex2()</a> or globaly <a class="el" href="class_dviglo_1_1_collision_edge2_d.html#a00a415f25a8665f074b1b6f1fb87799d">SetVertices()</a>). They are provided to assist in making a free-form static environment for your game. A major limitation of edge shapes is that they can collide with circles and polygons but not with themselves. The collision algorithms used by Box2D require that at least one of two colliding shapes have volume. Edge shapes have no volume, so edge-edge collision is not possible.</li>
<li>Chain shapes &lt;=&gt; <a class="el" href="class_dviglo_1_1_collision_chain2_d.html" title="2D chain collision component.">CollisionChain2D</a>: defines 2D physics collision chain. The chain shape provides an efficient way to connect many edges together (<a class="el" href="class_dviglo_1_1_collision_chain2_d.html#a30872fe397d263a086e21a482e11e1f8">SetVertices()</a>) to construct your static game worlds. You can connect chains together using ghost vertices. Self-intersection of chain shapes is not supported.</li>
</ul>
<p>Several collision shapes may exist in the same node to create compound shapes. This can be handy to approximate complex or concave shapes.</p>
<p>Important: collision shapes must match your textures in order to be accurate. You can use Tiled's objects to create your shapes (see <a class="el" href="_urho2_d.html#Urho2D_TMX_Objects">Tile map objects</a>). Or you can use tools like Physics Body Editor (<a href="https://code.google.com/p/box2d-editor/">https://code.google.com/p/box2d-editor/</a>), RUBE (<a href="https://www.iforce2d.net/rube/">https://www.iforce2d.net/rube/</a>), LevelHelper (<a href="http://www.gamedevhelper.com/levelhelper/">http://www.gamedevhelper.com/levelhelper/</a>), PhysicsEditor (<a href="https://www.codeandweb.com/physicseditor">https://www.codeandweb.com/physicseditor</a>), ... to help you. Other interesting tool is BisonKick (<a href="https://bisonkick.com/app/518195d06927101d38a83b66/">https://bisonkick.com/app/518195d06927101d38a83b66/</a>).</p>
<p>Use <a class="el" href="class_dviglo_1_1_physics_world2_d.html#a823f0449f4a352f933565018fbeb8190">SetDrawShape()</a> in combination with <a class="el" href="class_dviglo_1_1_physics_world2_d.html#addc17e419f212339b964e1d3e0f9bf35">DrawDebugGeometry()</a> to toggle shapes visibility.</p>
<h2><a class="anchor" id="Urho2D_Collision_Shapes_Fixtures"></a>
Fixtures</h2>
<p>Box2D fixtures are implemented through the <a class="el" href="class_dviglo_1_1_collision_shape2_d.html" title="2D collision shape component.">CollisionShape2D</a> base class for 2D physics collision shapes. Common parameters shared by every collision shape include:</p><ul>
<li>Density: <a class="el" href="class_dviglo_1_1_collision_shape2_d.html#a5781f15dd0b1fe4fe33ff6857bab8d8e">SetDensity()</a> and <a class="el" href="class_dviglo_1_1_collision_shape2_d.html#adda99220f6c9d0521d94fdcc1df35baf">GetDensity()</a></li>
<li>Friction: <a class="el" href="class_dviglo_1_1_collision_shape2_d.html#a727aeba0ae4b9c316eb288c9bb870b79">SetFriction()</a> and <a class="el" href="class_dviglo_1_1_collision_shape2_d.html#a75558af48b3f7978712a10066f85a7c7">GetFriction()</a></li>
<li>Restitution (bounciness): <a class="el" href="class_dviglo_1_1_collision_shape2_d.html#ab83a1274db6d1bced6b5d72431873d4d">SetRestitution()</a> and <a class="el" href="class_dviglo_1_1_collision_shape2_d.html#a93781e80daf3d0e91523ffb546aa92bb">GetRestitution()</a></li>
</ul>
<p><a class="el" href="class_dviglo_1_1_collision_shape2_d.html" title="2D collision shape component.">CollisionShape2D</a> class also provides readonly access to these properties:</p><ul>
<li>Mass: <a class="el" href="class_dviglo_1_1_collision_shape2_d.html#a84b35cf5761992785150d8887b894dc0">GetMass()</a></li>
<li>Inertia: <a class="el" href="class_dviglo_1_1_collision_shape2_d.html#a0e9d5d4630e03d47a892052dd9372210">GetInertia()</a></li>
<li>Center of mass: <a class="el" href="class_dviglo_1_1_collision_shape2_d.html#a874df5c4b7f32ad1ed8b8889f1260f90">GetMassCenter()</a></li>
</ul>
<h2><a class="anchor" id="Urho2D_Collision_Shapes_Filtering"></a>
Collision filtering</h2>
<p>Box2D supports collision filtering (restricting which other objects to collide with) using categories and groups:</p><ul>
<li>Collision categories:<ul>
<li>First assign the collision shape to a category, using <a class="el" href="class_dviglo_1_1_collision_shape2_d.html#afbc03955d5150aabe25394e0597258d2">SetCategoryBits()</a>. Sixteen categories are available.</li>
<li>Then you can specify what other categories the given collision shape can collide with, using <a class="el" href="class_dviglo_1_1_collision_shape2_d.html#a7399aa290cd3ccefa6b769eb03a25ac0">SetMaskBits()</a>.</li>
</ul>
</li>
<li>Collision groups: positive and negative indices assigned using <a class="el" href="class_dviglo_1_1_collision_shape2_d.html#a9836976631bff5799a6f53a43da223f5">SetGroupIndex()</a>. All collision shapes within the same group index either always collide (positive index) or never collide (negative index).</li>
</ul>
<p>Note that:</p><ul>
<li>collision group has higher precedence than collision category</li>
<li>a collision shape on a static body can only collide with a dynamic body</li>
<li>a collision shape on a kinematic body can only collide with a dynamic body</li>
<li>collision shapes on the same body never collide with each other</li>
</ul>
<h2><a class="anchor" id="Urho2D_Collision_Shapes_Sensors"></a>
Sensors</h2>
<p>A collision shape can be set to <a class="el" href="class_dviglo_1_1_collision_shape2_d.html#a8db0c5bf66281a771cccb9b70a71a55f">trigger mode</a> to only report collisions without actually applying collision forces. This can be used to implement trigger areas. Note that:</p><ul>
<li>a sensor can be triggered only by dynamic bodies (BT_DYNAMIC)</li>
<li><a class="el" href="_urho2_d.html#Urho2D_Physics_Queries">physics queries</a> don't report triggers. To get notified when a sensor is triggered or cease to be triggered, subscribe to E_PHYSICSBEGINCONTACT2D and E_PHYSICSENDCONTACT2D <a class="el" href="_urho2_d.html#Urho2D_Physics_Events">physics events</a>.</li>
</ul>
<h1><a class="anchor" id="Urho2D_Constraints_Components"></a>
Constraints components</h1>
<p>Constraints ('joints' in Box2D terminology) are used to constrain bodies to an anchor point or between themselves. Apply a constraint to a node (called 'ownerBody') and use <a class="el" href="class_dviglo_1_1_constraint.html#a5d7dee4a530cbcfacca0c44710ba062e">SetOtherBody()</a> to set the other node's body to be constrained to the ownerBody.</p>
<p>See 32_Urho2DConstraints sample for detailed examples and to help selecting the appropriate constraint. Following are the available constraints classes, with the indication of the corresponding 'joint' in Box2D manual (see Chapter 8 Joints):</p><ul>
<li><a class="el" href="class_dviglo_1_1_constraint2_d.html" title="2D physics constraint component.">Constraint2D</a>: base class for 2D physics constraints.</li>
<li>Distance joint &lt;=&gt; <a class="el" href="class_dviglo_1_1_constraint_distance2_d.html" title="2D distance constraint component.">ConstraintDistance2D</a>: defines 2D physics distance constraint. The distance between two anchor points (<a class="el" href="class_dviglo_1_1_constraint_distance2_d.html#af1c20cbab31a99a021139923cd32cecb">SetOwnerBodyAnchor()</a> and <a class="el" href="class_dviglo_1_1_constraint_distance2_d.html#ae4b16af000e308e7a2a67a0f2c1d2e41">SetOtherBodyAnchor()</a>) on two bodies is kept constant. The constraint can also be made soft, like a spring-damper connection. Softness is achieved by tuning frequency (<a class="el" href="class_dviglo_1_1_constraint_distance2_d.html#a266047bfd25c4448b14bde7866499bf6">SetFrequencyHz()</a> is below half of the timestep) and damping ratio (<a class="el" href="class_dviglo_1_1_constraint_distance2_d.html#a247f230d91f15e4e40cc93c96d47b44b">SetDampingRatio()</a>).</li>
<li>Revolute joint &lt;=&gt; <a class="el" href="class_dviglo_1_1_constraint_revolute2_d.html" title="2D revolute constraint component.">ConstraintRevolute2D</a>: defines 2D physics revolute constraint. This constraint forces two bodies to share a common hinge anchor point (<a class="el" href="class_dviglo_1_1_constraint_revolute2_d.html#a8197f3355a15da6aa74676e52d40bc96">SetAnchor()</a>). You can control the relative rotation of the two bodies (the constraint angle) using a limit and/or a motor. A limit (<a class="el" href="class_dviglo_1_1_constraint_revolute2_d.html#a778283210cd968c33aeb2f274a708f58">SetEnableLimit()</a>) forces the joint angle to remain between a lower (<a class="el" href="class_dviglo_1_1_constraint_revolute2_d.html#ae0922a2c4b5b6139e1cc66657f8606ed">SetLowerAngle()</a>) and upper (<a class="el" href="class_dviglo_1_1_constraint_revolute2_d.html#afecefdd9f1823663d1fdf3b78e9ddbfe">SetUpperAngle()</a>) bound. The limit will apply as much torque as needed to make this happen. The limit range should include zero, otherwise the constraint will lurch when the simulation begins. A motor (<a class="el" href="class_dviglo_1_1_constraint_revolute2_d.html#a56c963445aeecefdc853037800ccce99">SetEnableMotor()</a>) allows you to specify the constraint speed (the time derivative of the angle). The speed (<a class="el" href="class_dviglo_1_1_constraint_revolute2_d.html#aa74de721ef34522e802d471128c3bb83">SetMotorSpeed()</a>) can be negative or positive. When the maximum torque (<a class="el" href="class_dviglo_1_1_constraint_revolute2_d.html#ac48f4c76182466b966c7f7e82c8a3823">SetMaxMotorTorque()</a>) is exceeded, the joint will slow down and can even reverse. You can use a motor to simulate friction. Just set the joint speed to zero, and set the maximum torque to some small, but significant value. The motor will try to prevent the constraint from rotating, but will yield to a significant load.</li>
<li>Prismatic joint &lt;=&gt; <a class="el" href="class_dviglo_1_1_constraint_prismatic2_d.html" title="2D prismatic constraint component.">ConstraintPrismatic2D</a>: defines 2D physics prismatic constraint. This constraint allows for relative translation of two bodies along a specified axis (<a class="el" href="class_dviglo_1_1_constraint_prismatic2_d.html#a58b56b2f62cf6ee77253c2fe6bf63641">SetAxis()</a>). There's no rotation applied. This constraint definition is similar to <a class="el" href="class_dviglo_1_1_constraint_revolute2_d.html" title="2D revolute constraint component.">ConstraintRevolute2D</a> description; just substitute translation for angle and force for torque.</li>
<li>Pulley joint &lt;=&gt; <a class="el" href="class_dviglo_1_1_constraint_pulley2_d.html" title="2D pulley constraint component.">ConstraintPulley2D</a>: defines 2D physics pulley constraint. The pulley connects two bodies to ground (<a class="el" href="class_dviglo_1_1_constraint_pulley2_d.html#a7c88c6e579b345ddeb2606a8a030a2ab">SetOwnerBodyGroundAnchor()</a> and <a class="el" href="class_dviglo_1_1_constraint_pulley2_d.html#ab111a9e7090bc6583cec3ad250c20425">SetOtherBodyGroundAnchor()</a>) and to each other (<a class="el" href="class_dviglo_1_1_constraint_pulley2_d.html#aa0c10870a35963448e8b95aaf2c2ef76">SetOwnerBodyAnchor()</a> and <a class="el" href="class_dviglo_1_1_constraint_pulley2_d.html#a671dc0f9ef12fb92532077854d8a92f0">SetOtherBodyAnchor()</a>). As one body goes up, the other goes down. You can supply a ratio (<a class="el" href="class_dviglo_1_1_constraint_pulley2_d.html#a8270743d859bd2c8585a7193cf7b6c24">SetRatio()</a>) that simulates a block and tackle. This causes one side of the pulley to extend faster than the other. At the same time the constraint force is smaller on one side than the other. You can use this to create mechanical leverage.</li>
<li>Gear joint &lt;=&gt; <a class="el" href="class_dviglo_1_1_constraint_gear2_d.html" title="2D gear constraint component.">ConstraintGear2D</a>: defines 2D physics gear constraint. Used to create sophisticated mechanisms and saves from using compound shapes. This constraint can only connect ConstraintRevolute2Ds and/or ConstraintPrismatic2Ds (<a class="el" href="class_dviglo_1_1_constraint_gear2_d.html#a8e35f61e0c88950a54e2fe5620245e21">SetOwnerConstraint()</a> and <a class="el" href="class_dviglo_1_1_constraint_gear2_d.html#aa7f7577bfbf48958efb54e158eef817c">SetOtherConstraint()</a>). Like the pulley ratio, you can specify a gear ratio (<a class="el" href="class_dviglo_1_1_constraint_gear2_d.html#aba22201c645bcda3f36b61b48f70f973">SetRatio()</a>). However, in this case the gear ratio can be negative.</li>
<li>Mouse joint &lt;=&gt; <a class="el" href="class_dviglo_1_1_constraint_mouse2_d.html" title="2D mouse constraint component.">ConstraintMouse2D</a>: defines 2D physics mouse constraint. Used to manipulate bodies with the mouse, this constraint is almost used in every Box2D tutorial available on the net, to allow interacting with the 2D scene. It attempts to drive a point on a body towards the current position of the cursor. There is no restriction on rotation. This constraint has a target point, maximum force, frequency, and damping ratio. The target point (<a class="el" href="class_dviglo_1_1_constraint_mouse2_d.html#a79bb4d4facd5f9cb9bb5ba9fe879f94c">SetTarget()</a>) initially coincides with the body’s anchor point. The maximum force (<a class="el" href="class_dviglo_1_1_constraint_mouse2_d.html#a513bd5f92374211c88dbb96f1b51ffe2">SetMaxForce()</a>) is used to prevent violent reactions when multiple dynamic bodies interact. You can make this as large as you like. The frequency (<a class="el" href="class_dviglo_1_1_constraint_mouse2_d.html#af95c541977ce2ca80447b0ef8a7a876c">SetFrequencyHz()</a>) and damping ratio (<a class="el" href="class_dviglo_1_1_constraint_mouse2_d.html#a9e8bf84015fc55d58de1694f99c5da1b">SetDampingRatio()</a>) are used to create a spring/damper effect similar to the <a class="el" href="class_dviglo_1_1_constraint_distance2_d.html" title="2D distance constraint component.">ConstraintDistance2D</a>. Many users have tried to adapt the <a class="el" href="class_dviglo_1_1_constraint_mouse2_d.html" title="2D mouse constraint component.">ConstraintMouse2D</a> for game play. Users often want to achieve precise positioning and instantaneous response. The <a class="el" href="class_dviglo_1_1_constraint_mouse2_d.html" title="2D mouse constraint component.">ConstraintMouse2D</a> doesn’t work very well in that context. You may wish to consider using kinematic bodies instead.</li>
<li>Wheel joint &lt;=&gt; <a class="el" href="class_dviglo_1_1_constraint_wheel2_d.html" title="2D wheel constraint component.">ConstraintWheel2D</a>: defines 2D physics wheel constraint. This constraint restricts a point on bodyB (<a class="el" href="class_dviglo_1_1_constraint_wheel2_d.html#af63ab01b61b28d23efc96c057e7e28dc">SetAnchor()</a>) to a line on bodyA (<a class="el" href="class_dviglo_1_1_constraint_wheel2_d.html#adfbeb1daaadc6240306ffbc7ad12ea57">SetAxis()</a>). It also provides a suspension spring.</li>
<li>Weld joint &lt;=&gt; <a class="el" href="class_dviglo_1_1_constraint_weld2_d.html" title="2D weld constraint component.">ConstraintWeld2D</a>: defines 2D physics weld constraint. This constraint attempts to constrain all relative motion between two bodies.</li>
<li>Rope joint &lt;=&gt; <a class="el" href="class_dviglo_1_1_constraint_rope2_d.html" title="2D rope constraint component.">ConstraintRope2D</a>: defines 2D physics rope constraint. This constraint restricts the maximum distance (<a class="el" href="class_dviglo_1_1_constraint_rope2_d.html#a22ac040bf8cc850a22dbfda6e8e70c32">SetMaxLength()</a>) between two points (<a class="el" href="class_dviglo_1_1_constraint_rope2_d.html#a273e4ae5d713be7d625edcdf93216b5f">SetOwnerBodyAnchor()</a> and <a class="el" href="class_dviglo_1_1_constraint_rope2_d.html#a6cfa649855f90d6e808d4fd91dfe3020">SetOtherBodyAnchor()</a>). This can be useful to prevent chains of bodies from stretching, even under high load.</li>
<li>Friction joint &lt;=&gt; <a class="el" href="class_dviglo_1_1_constraint_friction2_d.html" title="2D friction constraint component.">ConstraintFriction2D</a>: defines 2D physics friction constraint. This constraint is used for top-down friction. It provides 2D translational friction (<a class="el" href="class_dviglo_1_1_constraint_friction2_d.html#a88f12536b7f57a8bc1d80f82617cd759">SetMaxForce()</a>) and angular friction (<a class="el" href="class_dviglo_1_1_constraint_friction2_d.html#ad9b8c165a9ad5ac5ea1727c1ac5f72c1">SetMaxTorque()</a>).</li>
<li>Motor joint &lt;=&gt; <a class="el" href="class_dviglo_1_1_constraint_motor2_d.html" title="2D motor constraint component.">ConstraintMotor2D</a>: defines 2D physics motor constraint. This constraint lets you control the motion of a body by specifying target position (<a class="el" href="class_dviglo_1_1_constraint_motor2_d.html#aa25d96a7173d448dd5222d21abb58f4e">SetLinearOffset()</a>) and rotation offsets (<a class="el" href="class_dviglo_1_1_constraint_motor2_d.html#a86354918958d66ca85e67ed120a9baff">SetAngularOffset()</a>). You can set the maximum motor force (<a class="el" href="class_dviglo_1_1_constraint_motor2_d.html#adaa56d26b6aa70afc05e8b43308e1a9d">SetMaxForce()</a>) and torque (<a class="el" href="class_dviglo_1_1_constraint_motor2_d.html#ae8f099cf45ff41246c1f3a52fe28b850">SetMaxTorque()</a>) that will be applied to reach the target position and rotation. If the body is blocked, it will stop and the contact forces will be proportional to the maximum motor force and torque.</li>
</ul>
<p>Collision between bodies connected by a constraint can be enabled/disabled using <a class="el" href="class_dviglo_1_1_constraint2_d.html#ab2b4030e588981240dd15c7b08c4060e">SetCollideConnected()</a>.</p>
<p>Use <a class="el" href="class_dviglo_1_1_physics_world2_d.html#a5091760c2a8da1c221b2d07238fce816">SetDrawJoint()</a> in combination with <a class="el" href="class_dviglo_1_1_physics_world2_d.html#addc17e419f212339b964e1d3e0f9bf35">DrawDebugGeometry()</a> to toggle joints visibility.</p>
<h1><a class="anchor" id="Urho2D_Physics_Queries"></a>
Physics queries</h1>
<p>The following queries into the physics world are provided:</p>
<h2><a class="anchor" id="Urho2D_Physics_Queries_Unary"></a>
Unary geometric queries (queries on a single shape)</h2>
<ul>
<li>Shape point test: test if a point is inside a given plain shape and returns the body if true. Use <a class="el" href="class_dviglo_1_1_physics_world2_d.html#a0cf0c83489141037decba7aa10e15c2e">GetRigidBody()</a>. Point can be a <a class="el" href="class_dviglo_1_1_vector2.html" title="Two-dimensional vector.">Vector2</a> world position, or more conveniently you can pass screen coordinates when performing the test from an input (mouse, joystick, touch). Note that only plain shapes are supported, this test is not applicable to <a class="el" href="class_dviglo_1_1_collision_chain2_d.html">CollisionChain2D</a> and <a class="el" href="class_dviglo_1_1_collision_edge2_d.html">CollisionEdge2D</a> shapes.</li>
<li>Shape ray cast: returns the body, distance, point of intersection (position) and normal vector for the first shape hit by the ray. Use <a class="el" href="class_dviglo_1_1_physics_world2_d.html#ad5d6fcb31f7fbd813680813e8a114501">RaycastSingle()</a>.</li>
</ul>
<h2><a class="anchor" id="Urho2D_Physics_Queries_Binary"></a>
Binary functions</h2>
<ul>
<li>Overlap between 2 shapes: not implemented</li>
<li>Contact manifolds (contact points for overlaping shapes): not implemented</li>
<li>Distance between 2 shapes: not implemented</li>
<li>Time of impact (time when 2 moving shapes collide): not implemented</li>
</ul>
<h2><a class="anchor" id="Urho2D_Physics_Queries_World"></a>
World queries (see Box2D manual - Chapter 10 World Class)</h2>
<ul>
<li>AABB queries: return the bodies overlaping with the given rectangle. See <a class="el" href="class_dviglo_1_1_physics_world2_d.html#aeb5310943c49ea6b4b25524edf299651">GetRigidBodies()</a>.</li>
<li>Ray casts: return the body, distance, point of intersection (position) and normal vector for every shape hit by the ray. See <a class="el" href="class_dviglo_1_1_physics_world2_d.html#a98a02cb0bfd2de9530e137aa3f5fc8b9">Raycast()</a>.</li>
</ul>
<h1><a class="anchor" id="Urho2D_Physics_Events"></a>
Physics events</h1>
<p>Contact listener (see Box2D manual, Chapter 9 Contacts) enables a given node to report contacts through events. Available events are:</p><ul>
<li>E_PHYSICSBEGINCONTACT2D ("PhysicsBeginContact2D" in script): called when 2 collision shapes begin to overlap</li>
<li>E_PHYSICSENDCONTACT2D ("PhysicsEndContact2D" in script): called when 2 collision shapes cease to overlap</li>
<li>E_PHYSICSPRESTEP2D ("PhysicsPreStep2D" in script): called after collision detection, but before collision resolution. This allows to disable the contact if need be (for example on a one-sided platform). Currently ineffective (only reports <a class="el" href="class_dviglo_1_1_physics_world2_d.html" title="2D physics simulation world component. Should be added only to the root scene node.">PhysicsWorld2D</a> and time step)</li>
<li>E_PHYSICSPOSTSTEP2D ("PhysicsPostStep2D" in script): used to gather collision impulse results. Currentlly ineffective (only reports <a class="el" href="class_dviglo_1_1_physics_world2_d.html" title="2D physics simulation world component. Should be added only to the root scene node.">PhysicsWorld2D</a> and time step)</li>
</ul>
<h1><a class="anchor" id="Urho2D_TileMap"></a>
Tile maps</h1>
<p>Tile maps workflow relies on the tmx file format, which is the native format of Tiled, a free app available at <a href="http://www.mapeditor.org/">http://www.mapeditor.org/</a>. It is strongly recommended to use stable release 0.9.1. Do not use daily builds or other newer/older stable revisions, otherwise results may be unpredictable.</p>
<p>Check example 36_Urho2DTileMap for a basic demonstration.</p>
<p>You can use tile maps for the design of the whole scene/level, or in adjunction to other 2D resources.</p>
<h2><a class="anchor" id="Urho2D_LoadingTMX"></a>
"Loading" a TMX tile map file</h2>
<p>A tmx file is loaded using <a class="el" href="class_dviglo_1_1_tmx_file2_d.html">TmxFile2D resource class</a> and rendered using <a class="el" href="class_dviglo_1_1_tile_map2_d.html">TileMap2D component class</a>. You just have to create a <a class="el" href="class_dviglo_1_1_tile_map2_d.html">TileMap2D</a> component inside a node and then assign the tmx resource file to it.</p>
<p>C++: </p><div class="fragment"><div class="line">SharedPtr&lt;Node&gt; tileMapNode(scene_-&gt;CreateChild(<span class="stringliteral">&quot;TileMap&quot;</span>)); <span class="comment">// Create a standard Urho3D node</span></div>
<div class="line">TileMap2D* tileMap = tileMapNode-&gt;CreateComponent&lt;TileMap2D&gt;(); <span class="comment">// Create the TileMap2D component</span></div>
<div class="line">tileMap-&gt;SetTmxFile(cache-&gt;GetResource&lt;TmxFile2D&gt;(<span class="stringliteral">&quot;Urho2D/isometric_grass_and_water.tmx&quot;</span>)); <span class="comment">// Assign tmx resource file to component</span></div>
</div><!-- fragment --><p>AngelScript: </p><div class="fragment"><div class="line">Node@ tileMapNode = scene_.CreateChild(<span class="stringliteral">&quot;TileMap&quot;</span>); <span class="comment">// Create a standard Urho3D node</span></div>
<div class="line">TileMap2D@ tileMap = tileMapNode.CreateComponent(<span class="stringliteral">&quot;TileMap2D&quot;</span>); <span class="comment">// Create the TileMap2D component</span></div>
<div class="line">tileMap.tmxFile = cache.GetResource(<span class="stringliteral">&quot;TmxFile2D&quot;</span>, <span class="stringliteral">&quot;Urho2D/isometric_grass_and_water.tmx&quot;</span>); <span class="comment">// Assign the tmx resource file to component</span></div>
</div><!-- fragment --><p>Lua: </p><div class="fragment"><div class="line">local tileMapNode = scene_:CreateChild(<span class="stringliteral">&quot;TileMap&quot;</span>) -- Create a standard Urho3D node</div>
<div class="line">local tileMap = tileMapNode:CreateComponent(<span class="stringliteral">&quot;TileMap2D&quot;</span>) -- Create the TileMap2D component</div>
<div class="line">tileMap.tmxFile = cache:GetResource(<span class="stringliteral">&quot;TmxFile2D&quot;</span>, <span class="stringliteral">&quot;Urho2D/isometric_grass_and_water.tmx&quot;</span>) -- Assign tmx resource file to component</div>
</div><!-- fragment --><p>Note that:</p><ul>
<li>currently only XML Layer Format is supported (Base64 and CSV are not). In Tiled, go to Maps &gt; Properties to set 'Layer Format' to 'XML'.</li>
<li>if 'seams' between tiles are obvious then you should make your tilesets images nearest filtered (see <a class="el" href="_urho2_d.html#Urho2D_Static_Sprites">Static sprites</a> section above.)</li>
</ul>
<h2><a class="anchor" id="Urho2D_TMX_maps"></a>
TMX tile maps</h2>
<p>Once a tmx file is loaded in Urho, use <a class="el" href="class_dviglo_1_1_tile_map2_d.html#a0f79abbcbcd27eaff9515b15ef9f596c">GetInfo()</a> to access the map properties through <a class="el" href="struct_dviglo_1_1_tile_map_info2_d.html">TileMapInfo2D</a> class.</p>
<p>A map is defined by its:</p><ul>
<li>orientation: Urho2D supports both orthogonal (flat) and isometric (strict iso 2.5D and staggered iso) tile maps. Orientation can be retrieved with <a class="el" href="struct_dviglo_1_1_tile_map_info2_d.html#a81b83fc5302900d62eb8c5fc5c7bd474">orientation_</a> attribute (O_ORTHOGONAL for ortho, O_ISOMETRIC for iso and O_STAGGERED for staggered)</li>
<li>width and height expressed as a number of tiles in the map: use <a class="el" href="struct_dviglo_1_1_tile_map_info2_d.html#a319eb265701cadc127c1c0bcb21579e6">width_</a> and <a class="el" href="struct_dviglo_1_1_tile_map_info2_d.html#ac1c58d08d53ca71be82bd26c38d095c6">height_</a> attributes to access these values</li>
<li>width and height expressed in Urho2D space: use <a class="el" href="struct_dviglo_1_1_tile_map_info2_d.html#afd73f1059f9623d4a06007750559afb6">GetMapWidth()</a> and <a class="el" href="struct_dviglo_1_1_tile_map_info2_d.html#ad07cf303487e9a638a5b71c2a8b333dd">GetMapHeight()</a> to access these values which are useful to set the camera's position for example</li>
<li>tile width and tile height as the size in pixels of the tiles in the map (equates to Tiled width/height * PIXEL_SIZE): use <a class="el" href="struct_dviglo_1_1_tile_map_info2_d.html#a7edc1f2c4a1f2e3b5ff0bc28969cbe97">tileWidth_</a> and <a class="el" href="struct_dviglo_1_1_tile_map_info2_d.html#ac52d3612f7014f158619e4fdb406c543">tileHeight_</a> attributes to access these values</li>
</ul>
<p>Two convenient functions are provided to convert Tiled index to/from Urho2D space:</p><ul>
<li><a class="el" href="class_dviglo_1_1_tile_map2_d.html#adb889e1c9ed6a1f623e7705d55632205">TileIndexToPosition()</a> to convert tile index to Urho position</li>
<li><a class="el" href="class_dviglo_1_1_tile_map2_d.html#a5c0e3a13d24f3946ca78b2ffe634a3ec">PositionToTileIndex()</a> to convert Urho position to tile index (returns false if position is outside of the map)</li>
</ul>
<p>You can display debug geometry for the whole tile map using <a class="el" href="class_dviglo_1_1_tile_map2_d.html#a4b97632eb634e70e79156a9b3a9b947d">DrawDebugGeometry()</a>.</p>
<h2><a class="anchor" id="Urho2D_TMX_Tileset"></a>
TMX tile map tilesets and tiles</h2>
<p>A tile map is built from fixed-size sprites ('tiles', accessible from the <a class="el" href="class_dviglo_1_1_tile2_d.html" title="Tile define.">Tile2D</a> class) belonging to one or more 'tilesets' (=spritesheets). Each tile is characterized by its:</p><ul>
<li>grid ID (ID in the tileset, from top-left to bottom-right): use <a class="el" href="class_dviglo_1_1_tile2_d.html#a08c23644f498c6eafa7253b1cfd9f4d6">GetGid()</a></li>
<li>sprite/image (<a class="el" href="class_dviglo_1_1_sprite2_d.html" title="Sprite.">Sprite2D</a>): use <a class="el" href="class_dviglo_1_1_tile2_d.html#a5e66f8a3f8800265f0678650662f493e">GetSprite()</a></li>
<li>property: use <a class="el" href="class_dviglo_1_1_tile2_d.html#a9c8f79a54dfac2866cbd9ee2982476d8">HasProperty()</a> and <a class="el" href="class_dviglo_1_1_tile2_d.html#afdd4367217ac09350f1599672ec0f8d3">GetProperty()</a></li>
</ul>
<p>Tiles from a tileset can only be accessed from one of the layers they are 'stamped' onto, using <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html#ac7d71b8f9e8badf6bdba2bacf1b10fb6">GetTile()</a> (see next section).</p>
<h2><a class="anchor" id="Urho2D_TMX_layers"></a>
TMX tile map layers</h2>
<p>A tile map is composed of a mix of ordered <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html">layers</a>. The number of layers contained in the tmx file is retrieved using <a class="el" href="class_dviglo_1_1_tile_map2_d.html#ae9935aab6d17617aea04b33feb8170bd">GetNumLayers()</a>.</p>
<p>Accessing layers : from a <a class="el" href="class_dviglo_1_1_tile_map2_d.html">TileMap2D component</a>, layers are accessed by their index from bottom (0) to top using <a class="el" href="class_dviglo_1_1_tile_map2_d.html#ac1e788704ca2cb259c85824d60fc2852">GetLayer()</a> function.</p>
<p>A layer is characterized by its:</p><ul>
<li>name: currently not accessible</li>
<li>width and height expressed as a number of tiles: use <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html#aab543b209bfc636dc64f6a9e7554db01">GetWidth()</a> and <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html#a922cc7fea13b97cf60ff01532226da79">GetHeight()</a> to access these values</li>
<li>type: retrieved using <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html#a48377a8b8ad2a83266299878f7b13b9b">GetLayerType()</a> (returns the type of layer, a TileMapLayerType2D: Tile=LT_TILE_LAYER, Object=LT_OBJECT_GROUP, Image=LT_IMAGE_LAYER and Invalid=LT_INVALID)</li>
<li>custom properties : use <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html#aca8cc6bea240af47298f51c8af189d1b">HasProperty()</a> and <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html#abe97a1dd08e1cf4d75204ef82ce3efaa">GetProperty()</a> to check/access these values</li>
</ul>
<p>Layer visibility can be toggled using <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html#aa6f444a186c5e2189a608e45be262ed4">SetVisible()</a> (and visibility state can be accessed with <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html#ad1473f24acb359033259413938c0f8dc">IsVisible()</a>). Currently layer opacity is not implemented. Use <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html#ae371afb2c1c52006a86e9e2d46116c3f">DrawDebugGeometry()</a> to display debug geometry for a given layer.</p>
<p>By default, first tile map layer is drawn on scene layer 0 and subsequent layers are drawn in a 10 scene layers step. For example, if your tile map has 3 layers:</p><ul>
<li>bottom layer is drawn on layer 0</li>
<li>middle layer is on layer 10</li>
<li>top layer is on layer 20</li>
</ul>
<p>You can override this default layering order by using <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html#af4e8f7e72db07cb4c6bf1ff2a7cc05a5">SetDrawOrder()</a>, and you can retrieve the order using <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html#ac521e240fd12be7596016d4011944cfd">GetDrawOrder()</a>.</p>
<p>You can access a given tile node or tileset's tile (<a class="el" href="class_dviglo_1_1_tile2_d.html" title="Tile define.">Tile2D</a>) by its index (tile index is displayed at the bottom-left in Tiled and can be retrieved from position using <a class="el" href="class_dviglo_1_1_tile_map2_d.html#a5c0e3a13d24f3946ca78b2ffe634a3ec">PositionToTileIndex()</a>):</p><ul>
<li>to access a tile node, which enables access to the <a class="el" href="class_dviglo_1_1_static_sprite2_d.html" title="Static sprite component.">StaticSprite2D</a> component, for example to remove it or replace it, use <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html#aa472eecbd9aa6558bacea0e1b87bbf3d">GetTileNode()</a></li>
<li>to access a tileset's <a class="el" href="class_dviglo_1_1_tile2_d.html" title="Tile define.">Tile2D</a> tile, which enables access to the <a class="el" href="class_dviglo_1_1_sprite2_d.html" title="Sprite.">Sprite2D</a> resource, gid and custom properties (as mentioned <a class="el" href="_urho2_d.html#Urho2D_TMX_Tileset">above</a>), use <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html#ac7d71b8f9e8badf6bdba2bacf1b10fb6">GetTile()</a></li>
</ul>
<p>An Image layer node or an Object layer node are accessible using <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html#a640c23a9302ba5e4562bf9dd43445f4b">GetImageNode()</a> and <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html#ab88859ef69fd2e14849df160c6215a4a">GetObjectNode()</a>.</p>
<h2><a class="anchor" id="Urho2D_TMX_Objects"></a>
TMX tile map objects</h2>
<p>Tiled <a class="el" href="class_dviglo_1_1_tile_map_object2_d.html">objects</a> are wire shapes (Rectangle, Ellipse, Polygon, Polyline) and sprites (Tile) that are freely positionable in the tile map.</p>
<p>Accessing Tiled objects : from a <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html">TileMapLayer2D layer</a>, objects are accessed by their index using <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html#af95eb2590aa134cdf5c33460addecdfd">GetObject()</a>. <a class="el" href="class_dviglo_1_1_tile_map_layer2_d.html#a9d7976bb393ddf1c933c15e9535555e0">GetNumObjects()</a> returns the number of objects contained in the object layer (tile and image layers will return 0 as they don't hold objects).</p>
<p>Use <a class="el" href="class_dviglo_1_1_tile_map_object2_d.html#abda573e0e808adb0505eba19517e32e7">GetObjectType()</a> to get the nature of the selected object (TileMapObjectType2D: OT_RECTANGLE for Rectangle, OT_ELLIPSE for Ellipse, OT_POLYGON for Polygon, OT_POLYLINE for PolyLine, OT_TILE for Tile and OT_INVALID if not a valid object).</p>
<p>Objects' properties (Name and Type) can be accessed using respectively <a class="el" href="class_dviglo_1_1_tile_map_object2_d.html#af36b861e0efac42de759a2e64100cd6d">GetName()</a> and <a class="el" href="class_dviglo_1_1_tile_map_object2_d.html#a53c381479860fdf7c1d7032661ca4019">GetType()</a>. Type can be useful to flag categories of objects in Tiled.</p>
<p>Except Tile, objects are not visible (although you can display them for debugging purpose using DrawDebugGeometry() at the level of the tile map or a given layer, as mentioned previously). They can be used:</p><ul>
<li>to easily design polygon sprites and Box2D shapes using the object's vertices: use <a class="el" href="class_dviglo_1_1_tile_map_object2_d.html#ac4b47083366f2191af6497e63922d9f8">GetNumPoints()</a> to get the number of vertices and <a class="el" href="class_dviglo_1_1_tile_map_object2_d.html#a545999e6f2d489c532d8266a8d0a3f66">GetPoint()</a> to iterate through the vertices</li>
<li>as placeholders to easily set the position and size of entities in the world, using <a class="el" href="class_dviglo_1_1_tile_map_object2_d.html#aea7b7974ed3b1d28d3e4992868b3f51b">GetPosition()</a> and <a class="el" href="class_dviglo_1_1_tile_map_object2_d.html#aff6ccd09b5e9b4b247e5c7d951ef0c0b">GetSize()</a></li>
<li>to display Tile objects as sprites</li>
<li>to create a background from Tile sprites</li>
<li>etc.</li>
</ul>
<p>Additionally <a class="el" href="class_dviglo_1_1_sprite2_d.html" title="Sprite.">Sprite2D</a> resource from a Tile object is retrieved using <a class="el" href="class_dviglo_1_1_tile_map_object2_d.html#acad1ec34198bc7e86c63c5eebb807eea">GetTileSprite()</a>.</p>
<p>If need be you can access the grid id (relative to the tilesets used) of a Tile object using <a class="el" href="class_dviglo_1_1_tile_map_object2_d.html#ab67a5b50a99b66ba624197fe0426f1de">GetTileGid()</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jul 19 2021 08:31:11 for Urho3D by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
<!-- Dviglo: Добавленный код -->
<script>
function GetRootPath()
{
    return "";
}
</script>
<script defer src='Addon.js'></script>
</body>
</html>
